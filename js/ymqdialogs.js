var i;i=function(i){i(document).on("click","[data-ymq-id]",(function(n){n.preventDefault();var a=i(this).attr("data-ymq-id");i("#"+a).ymq(i(this).data())})),i.fn.ymq=function(n){return n=i.extend({},{animation:"fade",animationspeed:300,closeonbackgroundclick:!0,dismissmodalclass:"close-ymq-modal"},n),this.each((function(){var a=i(this),e=parseInt(a.css("top")),t=a.height()+e,o=!1,d=i(".ymq-modal-bg");function s(){o=!1}function c(){o=!0}0==d.length&&(d=i('<div class="ymq-modal-bg" />').insertAfter(a)),a.bind("ymq:open",(function(){if(d.unbind("click.modalEvent"),i("."+n.dismissmodalclass).unbind("click.modalEvent"),!o){if(c(),"fadeAndPop"==n.animation&&(a.css({top:i(document).scrollTop()-t,opacity:0,visibility:"visible"}),d.fadeIn(n.animationspeed/2),a.delay(n.animationspeed/2).animate({top:i(document).scrollTop()+e+"px",opacity:1},n.animationspeed,s())),"fade"==n.animation){if(a.height()+100>i(window).height())var m=50;else m=a.height()>300?(i(window).height()-a.height())/2:150;a.css({opacity:0,visibility:"visible",top:m,width:a.data("width"),"margin-left":-Number(a.data("width"))/2}),d.fadeIn(n.animationspeed/2),a.delay(n.animationspeed/2).animate({opacity:1},n.animationspeed,s())}"none"==n.animation&&(a.css({visibility:"visible",top:i(document).scrollTop()+e}),d.css({display:"block"}),s())}a.unbind("ymq:open")})),a.bind("ymq:close",(function(){o||(c(),"fadeAndPop"==n.animation&&(d.delay(n.animationspeed).fadeOut(n.animationspeed),a.animate({top:i(document).scrollTop()-t+"px",opacity:0},n.animationspeed/2,(function(){a.css({top:e,opacity:1,visibility:"hidden"}),s()}))),"fade"==n.animation&&(d.delay(n.animationspeed).fadeOut(n.animationspeed),a.animate({opacity:0},n.animationspeed,(function(){a.css({opacity:1,visibility:"hidden",top:e}),s()}))),"none"==n.animation&&(a.css({visibility:"hidden",top:e}),d.css({display:"none"}))),a.unbind("ymq:close")})),a.trigger("ymq:open"),i("."+n.dismissmodalclass).bind("click.modalEvent",(function(){a.trigger("ymq:close")})),n.closeonbackgroundclick&&(d.css({cursor:"pointer"}),d.bind("click.modalEvent",(function(){a.trigger("ymq:close")}))),i("body").keyup((function(i){27===i.which&&a.trigger("ymq:close")}))}))}},"function"==typeof ymq_define&&ymq_define.amd?ymq_define(["jquery"],i):i(ymqJq);